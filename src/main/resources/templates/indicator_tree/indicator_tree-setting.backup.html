<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
    <!--/*/ <th:block th:include="common :: head"></th:block> /*/-->
    <link rel="stylesheet" th:href="@{/css/wizard/wizard.css}" type="text/css"/>
    <link th:href="@{/vendors/general/sweetalert2/dist/sweetalert2.min.css}" type="text/css"/>
    <link th:href="@{/css/flowcharts/jquery.flowchart.css}" rel="stylesheet" type="text/css">
    <style>
        .flowchart-operator {
            background-color: white;
        }

        .container-flowchart {
            height: 300px;
            margin-bottom: 10px;
            background-color: #fafafa;
        }
    </style>
</head>

<body class="kt-page--fluid kt-header--fixed kt-header--minimize-menu kt-header-mobile--fixed kt-subheader--enabled kt-subheader--transparent">

<div th:replace="common :: header"></div>

<div class="kt-grid kt-grid--hor kt-grid--root">
    <div class="kt-grid__item kt-grid__item--fluid kt-grid kt-grid--ver kt-page">
        <div class="kt-grid__item kt-grid__item--fluid kt-grid kt-grid--hor kt-wrapper" id="kt_wrapper">
            <div class="kt-grid__item kt-grid__item--fluid kt-grid kt-grid--ver kt-grid--stretch">
                <div class="kt-container kt-body  kt-grid kt-grid--ver" id="kt_body">
                    <div class="kt-grid__item kt-grid__item--fluid kt-grid kt-grid--hor">

                        <!-- begin:: Subheader -->
                        <div class="kt-subheader   kt-grid__item" id="kt_subheader" style="padding: 10px 0 !important;">
                            <div class="kt-subheader__main">
                                <span class="kt-subheader__separator kt-hidden"></span>
                                <div class="kt-subheader__breadcrumbs">
                                    <a class="kt-subheader__breadcrumbs-home" th:href="@{/}"><i
                                            class="flaticon2-shelter"></i></a>
                                    <span class="kt-subheader__breadcrumbs-separator"></span>
                                    <!--<a href="" class="kt-subheader__breadcrumbs-link">
                                        Cuenta </a>-->

                                    <a class="kt-subheader__breadcrumbs-link" th:href="@{/indicators/tree}">Indicador
                                        Business Tree</a>
                                    <span class="kt-subheader__breadcrumbs-separator"></span>
                                    <span class="kt-subheader__breadcrumbs-link kt-subheader__breadcrumbs-link--active">Configuración</span>
                                </div>
                            </div>
                        </div>
                        <!-- end:: Subheader -->

                        <!--Begin::  Content-->
                        <div class="kt-content  kt-grid__item kt-grid__item--fluid" id="kt_content">
                            <div class="kt-portlet">
                                <div class="kt-portlet__body kt-portlet__body--fit">
                                    <div class="kt-grid kt-wizard-v3 kt-wizard-v3--white" data-ktwizard-state="first"
                                         id="kt_wizard_tree">
                                        <div class="kt-grid__item">

                                            <!--begin: Form Wizard Nav -->
                                            <div class="kt-wizard-v3__nav">
                                                <div class="kt-wizard-v3__nav-items">
                                                    <span class="kt-wizard-v3__nav-item" data-ktwizard-state="current"
                                                          data-ktwizard-type="step" href="#"
                                                          style="flex: 0 0 50%;">
                                                        <div class="kt-wizard-v3__nav-body">
                                                            <div class="kt-wizard-v3__nav-label">
                                                                <span>1</span> Configuración del Business Tree
                                                            </div>
                                                            <div class="kt-wizard-v3__nav-bar"></div>
                                                        </div>
                                                    </span>
                                                    <span class="kt-wizard-v3__nav-item" data-ktwizard-state="pending"
                                                          data-ktwizard-type="step" href="#"
                                                          style="flex: 0 0 50%;">
                                                        <div class="kt-wizard-v3__nav-body">
                                                            <div class="kt-wizard-v3__nav-label">
                                                                <span>2</span> Resumen y guardar
                                                            </div>
                                                            <div class="kt-wizard-v3__nav-bar"></div>
                                                        </div>
                                                    </span>
                                                </div>
                                            </div>

                                            <!--end: Form Wizard Nav -->
                                        </div>
                                        <input id="organization" type="text" hidden th:value="${id_organization}">
                                        <div class="kt-grid__item kt-grid__item--fluid kt-wizard-v3__wrapper">

                                            <!--begin: Form Wizard Form-->
                                            <div class="kt-form" id="kt_form_tree" novalidate="novalidate" style="width: 90%;">

                                                <!--begin: Form Wizard Step 1-->
                                                <div class="kt-wizard-v3__content" data-ktwizard-state="current"
                                                     data-ktwizard-type="step-content">
                                                    <div class="kt-heading kt-heading--md">Configuración del Business
                                                        Tree
                                                    </div>
                                                    <div class="kt-form__section kt-form__section--first">
                                                        <div class="kt-wizard-v3__form">
                                                            <div class="row">
                                                                <div class="col-12">
                                                                    <div class="form-group">
                                                                        <div class="container-flowchart"
                                                                             id="tree"></div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-6">
                                                                    <div class="form-group">
                                                                        <label>Variable:</label>
                                                                        <select class="form-control" id="tree_variable"
                                                                                name="tree_variable">
                                                                            <option th:each="variable : ${dataintegration.variableCollection}"
                                                                                    th:text="${variable.name}"
                                                                                    th:value="${variable.code}">
                                                                            </option>
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                                <div class="col-2">
                                                                    <div class="form-group">
                                                                        <label>Operación:</label>
                                                                        <select class="form-control" id="tree_operation"
                                                                                name="tree_operation">
                                                                            <option value=">=">>=</option>
                                                                            <option value=">">></option>
                                                                            <option value="<="><=</option>
                                                                            <option value="<"><</option>
                                                                            <option value="==">==</option>
                                                                            <option value="!=">!=</option>
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                                <div class="col-4">
                                                                    <div class="form-group">
                                                                        <label>Valor a comparar:</label>
                                                                        <input class="form-control"
                                                                               id="tree_value_comparator"
                                                                               name="tree_value_comparator"
                                                                               placeholder="Valor a comparar"
                                                                               type="number">
                                                                    </div>
                                                                </div>
                                                                <div class="col-6">
                                                                    <button class="btn btn-primary"
                                                                            id="create_operator">Agregar nodo
                                                                    </button>
                                                                </div>
                                                                <div class="col-6">
                                                                    <button class="btn btn-primary float-right"
                                                                            id="delete_selected_button">Eliminar
                                                                        nodo
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!--end: Form Wizard Step 1-->
                                                <!--begin: Form Wizard Step 3-->
                                                <div class="kt-wizard-v3__content" data-ktwizard-type="step-content">
                                                    <div class="kt-heading kt-heading--md">Resumen de los detalles y
                                                        guardar
                                                    </div>
                                                    <div class="kt-form__section kt-form__section--first">
                                                        <div class="kt-wizard-v3__review">
                                                            <div class="kt-wizard-v3__review-item">
                                                                <div class="kt-wizard-v3__review-title">
                                                                    Titulo a mostrar en el gráfico de Risk Score
                                                                </div>
                                                                <div class="kt-wizard-v3__review-content">
                                                                    <label id="content_titule"
                                                                           class="text-info"></label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!--end: Form Wizard Step 3-->

                                                <!--begin: Form Actions -->
                                                <div class="kt-form__actions">
                                                    <div class="btn btn-secondary btn-md btn-tall btn-wide kt-font-bold kt-font-transform-u"
                                                         data-ktwizard-type="action-prev">
                                                        Atrás
                                                    </div>
                                                    <div class="btn btn-success btn-md btn-tall btn-wide kt-font-bold kt-font-transform-u"
                                                         data-ktwizard-type="action-submit">
                                                        Guardar
                                                    </div>
                                                    <div class="btn btn-brand btn-md btn-tall btn-wide kt-font-bold kt-font-transform-u"
                                                         data-ktwizard-type="action-next">
                                                        Siguiente
                                                    </div>
                                                </div>

                                                <!--end: Form Actions -->
                                            </div>

                                            <!--end: Form Wizard Form-->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--End::  Content-->
                    </div>
                </div>
            </div>


        </div>
    </div>
</div>

<div th:replace="common :: footer"></div>
<!--/*/ <th:block th:include="common :: scripts"></th:block> /*/-->
<script th:src="@{/js/custom/indicator_tree-setting.js}" type="text/javascript"></script>

<script src="https://code.jquery.com/jquery-1.12.2.min.js"></script>
<script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
<script th:src="@{/js/flowcharts/jquery.flowchart.js}" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        var data = {
            operators: {
                operator1: {
                    top: 20,
                    left: 20,
                    properties: {
                        title: 'Operator 1',
                        inputs: {},
                        outputs: {
                            output_1: {
                                label: 'Output 1',
                            }
                        }
                    }
                },
                operator2: {
                    top: 80,
                    left: 300,
                    properties: {
                        title: 'Operator 2',
                        inputs: {
                            input_1: {
                                label: 'Input 3',
                            },
                            input_2: {
                                label: 'Input 2',
                            },
                        },
                        outputs: {}
                    }
                },
            }
        };

        // Apply the plugin on a standard, empty div...
        $('#tree').flowchart({
            data: data
        });
    });
    var operatorI = 0;
    $('#create_operator').click(function () {
        var operatorId = 'created_operator_' + operatorI;
        var operatorData = {
            top: 60,
            left: 500,
            properties: {
                title: 'Operator ' + (operatorI + 3),
                inputs: {
                    input_1: {
                        label: 'Input 1',
                    }
                },
                outputs: {
                    output_1: {
                        label: 'Output 1',
                    }
                }
            }
        };

        operatorI++;

        $('#tree').flowchart('createOperator', operatorId, operatorData);
    });

    $('#delete_selected_button').click(function () {
        $('#tree').flowchart('deleteSelected');
    });
</script>

</body>
</html>