--
-- PostgreSQL database dump
--

-- Dumped from database version 10.7
-- Dumped by pg_dump version 10.7

-- Started on 2019-06-15 03:19:57

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET client_min_messages = warning;
SET row_security = off;

SET default_tablespace = '';

SET default_with_oids = false;

--
-- TOC entry 206 (class 1259 OID 24594)
-- Name: grisk_endpoint; Type: TABLE; Schema: public; Owner: grisk
--

CREATE TABLE public.grisk_endpoint (
    id_endpoint smallint NOT NULL,
    uri character varying NOT NULL,
    module smallint NOT NULL,
    display character varying NOT NULL,
    display_order smallint NOT NULL,
    icon character varying NOT NULL
);


ALTER TABLE public.grisk_endpoint OWNER TO grisk;

--
-- TOC entry 205 (class 1259 OID 24592)
-- Name: grisk_endpoint_id_endpoint_seq; Type: SEQUENCE; Schema: public; Owner: grisk
--

CREATE SEQUENCE public.grisk_endpoint_id_endpoint_seq
    AS smallint
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.grisk_endpoint_id_endpoint_seq OWNER TO grisk;

--
-- TOC entry 2871 (class 0 OID 0)
-- Dependencies: 205
-- Name: grisk_endpoint_id_endpoint_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: grisk
--

ALTER SEQUENCE public.grisk_endpoint_id_endpoint_seq OWNED BY public.grisk_endpoint.id_endpoint;


--
-- TOC entry 204 (class 1259 OID 16486)
-- Name: grisk_organization; Type: TABLE; Schema: public; Owner: grisk
--

CREATE TABLE public.grisk_organization (
    id_organization bigint NOT NULL,
    name character varying NOT NULL,
    rut character varying NOT NULL
);


ALTER TABLE public.grisk_organization OWNER TO grisk;

--
-- TOC entry 203 (class 1259 OID 16484)
-- Name: grisk_enterprise_id_enterprise_seq; Type: SEQUENCE; Schema: public; Owner: grisk
--

CREATE SEQUENCE public.grisk_enterprise_id_enterprise_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.grisk_enterprise_id_enterprise_seq OWNER TO grisk;

--
-- TOC entry 2872 (class 0 OID 0)
-- Dependencies: 203
-- Name: grisk_enterprise_id_enterprise_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: grisk
--

ALTER SEQUENCE public.grisk_enterprise_id_enterprise_seq OWNED BY public.grisk_organization.id_organization;


--
-- TOC entry 201 (class 1259 OID 16454)
-- Name: grisk_module; Type: TABLE; Schema: public; Owner: grisk
--

CREATE TABLE public.grisk_module (
    id_module smallint NOT NULL,
    display character varying NOT NULL,
    icon character varying NOT NULL,
    display_order smallint DEFAULT 0 NOT NULL,
    uri character varying
);


ALTER TABLE public.grisk_module OWNER TO grisk;

--
-- TOC entry 200 (class 1259 OID 16452)
-- Name: grisk_module_id_module_seq; Type: SEQUENCE; Schema: public; Owner: grisk
--

CREATE SEQUENCE public.grisk_module_id_module_seq
    AS smallint
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.grisk_module_id_module_seq OWNER TO grisk;

--
-- TOC entry 2873 (class 0 OID 0)
-- Dependencies: 200
-- Name: grisk_module_id_module_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: grisk
--

ALTER SEQUENCE public.grisk_module_id_module_seq OWNED BY public.grisk_module.id_module;


--
-- TOC entry 199 (class 1259 OID 16443)
-- Name: grisk_role; Type: TABLE; Schema: public; Owner: grisk
--

CREATE TABLE public.grisk_role (
    id_role smallint NOT NULL,
    name character varying NOT NULL,
    code character varying NOT NULL
);


ALTER TABLE public.grisk_role OWNER TO grisk;

--
-- TOC entry 198 (class 1259 OID 16441)
-- Name: grisk_role_id_role_seq; Type: SEQUENCE; Schema: public; Owner: grisk
--

CREATE SEQUENCE public.grisk_role_id_role_seq
    AS smallint
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.grisk_role_id_role_seq OWNER TO grisk;

--
-- TOC entry 2874 (class 0 OID 0)
-- Dependencies: 198
-- Name: grisk_role_id_role_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: grisk
--

ALTER SEQUENCE public.grisk_role_id_role_seq OWNED BY public.grisk_role.id_role;


--
-- TOC entry 197 (class 1259 OID 16432)
-- Name: grisk_user; Type: TABLE; Schema: public; Owner: grisk
--

CREATE TABLE public.grisk_user (
    id_user bigint NOT NULL,
    username character varying NOT NULL,
    pass character varying NOT NULL,
    create_at timestamp without time zone,
    update_at timestamp without time zone NOT NULL,
    role smallint NOT NULL,
    organization bigint NOT NULL,
    enabled boolean NOT NULL,
    non_locked boolean NOT NULL,
    attempt smallint NOT NULL,
    email character varying NOT NULL,
    token_restart character varying,
    token_confirm character varying
);


ALTER TABLE public.grisk_user OWNER TO grisk;

--
-- TOC entry 196 (class 1259 OID 16430)
-- Name: grisk_user_id_user_seq; Type: SEQUENCE; Schema: public; Owner: grisk
--

CREATE SEQUENCE public.grisk_user_id_user_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.grisk_user_id_user_seq OWNER TO grisk;

--
-- TOC entry 2875 (class 0 OID 0)
-- Dependencies: 196
-- Name: grisk_user_id_user_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: grisk
--

ALTER SEQUENCE public.grisk_user_id_user_seq OWNED BY public.grisk_user.id_user;


--
-- TOC entry 202 (class 1259 OID 16469)
-- Name: role_has_module; Type: TABLE; Schema: public; Owner: grisk
--

CREATE TABLE public.role_has_module (
    role smallint NOT NULL,
    module smallint NOT NULL
);


ALTER TABLE public.role_has_module OWNER TO grisk;

--
-- TOC entry 2708 (class 2604 OID 24597)
-- Name: grisk_endpoint id_endpoint; Type: DEFAULT; Schema: public; Owner: grisk
--

ALTER TABLE ONLY public.grisk_endpoint ALTER COLUMN id_endpoint SET DEFAULT nextval('public.grisk_endpoint_id_endpoint_seq'::regclass);


--
-- TOC entry 2705 (class 2604 OID 16457)
-- Name: grisk_module id_module; Type: DEFAULT; Schema: public; Owner: grisk
--

ALTER TABLE ONLY public.grisk_module ALTER COLUMN id_module SET DEFAULT nextval('public.grisk_module_id_module_seq'::regclass);


--
-- TOC entry 2707 (class 2604 OID 16489)
-- Name: grisk_organization id_organization; Type: DEFAULT; Schema: public; Owner: grisk
--

ALTER TABLE ONLY public.grisk_organization ALTER COLUMN id_organization SET DEFAULT nextval('public.grisk_enterprise_id_enterprise_seq'::regclass);


--
-- TOC entry 2704 (class 2604 OID 16446)
-- Name: grisk_role id_role; Type: DEFAULT; Schema: public; Owner: grisk
--

ALTER TABLE ONLY public.grisk_role ALTER COLUMN id_role SET DEFAULT nextval('public.grisk_role_id_role_seq'::regclass);


--
-- TOC entry 2703 (class 2604 OID 16435)
-- Name: grisk_user id_user; Type: DEFAULT; Schema: public; Owner: grisk
--

ALTER TABLE ONLY public.grisk_user ALTER COLUMN id_user SET DEFAULT nextval('public.grisk_user_id_user_seq'::regclass);


--
-- TOC entry 2864 (class 0 OID 24594)
-- Dependencies: 206
-- Data for Name: grisk_endpoint; Type: TABLE DATA; Schema: public; Owner: grisk
--

INSERT INTO public.grisk_endpoint VALUES (3, '/configuration', 2, 'conf', 1, 'cio');
INSERT INTO public.grisk_endpoint VALUES (4, '/tree-business', 3, 'tree', 2, 'cio');
INSERT INTO public.grisk_endpoint VALUES (5, '/reports', 4, 'reepo', 3, 'cio');
INSERT INTO public.grisk_endpoint VALUES (1, '/', 1, 'indexz', 4, 'cio');
INSERT INTO public.grisk_endpoint VALUES (2, '/dashboard', 1, 'dashboard', 5, 'cio');


--
-- TOC entry 2859 (class 0 OID 16454)
-- Dependencies: 201
-- Data for Name: grisk_module; Type: TABLE DATA; Schema: public; Owner: grisk
--

INSERT INTO public.grisk_module VALUES (1, 'Dashboard', 'fa-home', 0, '/dashboard');
INSERT INTO public.grisk_module VALUES (2, 'Configuration', 'fa-engine', 0, '/configuration');
INSERT INTO public.grisk_module VALUES (3, 'Tree Business', 'fa-tree', 0, '/tree-business');
INSERT INTO public.grisk_module VALUES (4, 'Reports', 'fa-char', 0, '/reports');


--
-- TOC entry 2862 (class 0 OID 16486)
-- Dependencies: 204
-- Data for Name: grisk_organization; Type: TABLE DATA; Schema: public; Owner: grisk
--

INSERT INTO public.grisk_organization VALUES (1, 'GRisk', '1-9');
INSERT INTO public.grisk_organization VALUES (2, 'Automotora Valdivieso', '2-8');
INSERT INTO public.grisk_organization VALUES (3, 'Factory Capital', '3-6');
INSERT INTO public.grisk_organization VALUES (12, 'test', 'test');
INSERT INTO public.grisk_organization VALUES (13, '123456', 'asaasas');


--
-- TOC entry 2857 (class 0 OID 16443)
-- Dependencies: 199
-- Data for Name: grisk_role; Type: TABLE DATA; Schema: public; Owner: grisk
--

INSERT INTO public.grisk_role VALUES (1, 'Root', 'ROOT');
INSERT INTO public.grisk_role VALUES (2, 'Administrador', 'ADMIN');
INSERT INTO public.grisk_role VALUES (3, 'BÃ¡sico', 'BASIC');


--
-- TOC entry 2855 (class 0 OID 16432)
-- Dependencies: 197
-- Data for Name: grisk_user; Type: TABLE DATA; Schema: public; Owner: grisk
--

INSERT INTO public.grisk_user VALUES (3, 'jpereira', '$2a$10$Mre6xdBz2HcGqjvwVY1SfeIagPUG/QcOjGWDVLv81kbaF4PTVx2uG', '2019-03-26 00:00:00', '2019-03-26 00:00:00', 3, 2, false, false, 0, 'jpereira@gmail.com', NULL, NULL);
INSERT INTO public.grisk_user VALUES (4, 'boyarzun', '$2a$10$9/VZ6mF8xfFQBSPgWAWJLORSZ9LeyhkPNYoRN5woj0l2Dg5RWMOjm', '2019-03-26 00:00:00', '2019-03-26 00:00:00', 2, 3, false, false, 0, 'boyarzun@gmail.com', NULL, NULL);
INSERT INTO public.grisk_user VALUES (2, 'prios', '$2a$10$DgyN/4rKEc1AWs1dREMQxuvdD2a4J5TaCfJtj2p5YD3GtKMlnE4dq', '2019-03-26 00:00:00', '2019-03-26 00:00:00', 2, 2, true, true, 0, 'prios@gmail.com', NULL, NULL);
INSERT INTO public.grisk_user VALUES (1, 'grisk', '$2a$10$DIHi4e7WUSoUAWKHbGScEeKG37Lfnw5qsTeWZtElqUsjUhXqUJ0cO', '2019-03-26 00:00:00', '2019-03-26 00:00:00', 1, 1, true, true, 0, 'grisk@gmail.com', NULL, NULL);
INSERT INTO public.grisk_user VALUES (11, 'Bastian', '$2a$10$NiaAxmiALkNs5KYSzwZ8/uBZHD/4or.mjoGdJip6kSJii6EsVF2Na', '2019-06-14 20:06:29.251', '2019-06-14 20:06:29.251', 2, 13, false, true, 0, 'bastian.oyarzun511@gmail.com', NULL, '86650881e9d18acd7d29def5187c7375');
INSERT INTO public.grisk_user VALUES (10, 'test', '$2a$10$DZmvMPScbX9gSrIkRW5b8uv6kcAz4l9BrcBAzUwyDOloUBkoSV9hq', '2019-06-14 18:09:21.666', '2019-06-14 18:09:21.666', 2, 12, true, true, 0, 'pa.riosramirez@gmail.com', '86650881e9d18acd7d29def5187c7375', NULL);


--
-- TOC entry 2860 (class 0 OID 16469)
-- Dependencies: 202
-- Data for Name: role_has_module; Type: TABLE DATA; Schema: public; Owner: grisk
--

INSERT INTO public.role_has_module VALUES (1, 1);
INSERT INTO public.role_has_module VALUES (1, 2);
INSERT INTO public.role_has_module VALUES (1, 3);
INSERT INTO public.role_has_module VALUES (1, 4);
INSERT INTO public.role_has_module VALUES (2, 1);
INSERT INTO public.role_has_module VALUES (2, 2);
INSERT INTO public.role_has_module VALUES (2, 3);
INSERT INTO public.role_has_module VALUES (3, 1);


--
-- TOC entry 2876 (class 0 OID 0)
-- Dependencies: 205
-- Name: grisk_endpoint_id_endpoint_seq; Type: SEQUENCE SET; Schema: public; Owner: grisk
--

SELECT pg_catalog.setval('public.grisk_endpoint_id_endpoint_seq', 5, true);


--
-- TOC entry 2877 (class 0 OID 0)
-- Dependencies: 203
-- Name: grisk_enterprise_id_enterprise_seq; Type: SEQUENCE SET; Schema: public; Owner: grisk
--

SELECT pg_catalog.setval('public.grisk_enterprise_id_enterprise_seq', 13, true);


--
-- TOC entry 2878 (class 0 OID 0)
-- Dependencies: 200
-- Name: grisk_module_id_module_seq; Type: SEQUENCE SET; Schema: public; Owner: grisk
--

SELECT pg_catalog.setval('public.grisk_module_id_module_seq', 5, true);


--
-- TOC entry 2879 (class 0 OID 0)
-- Dependencies: 198
-- Name: grisk_role_id_role_seq; Type: SEQUENCE SET; Schema: public; Owner: grisk
--

SELECT pg_catalog.setval('public.grisk_role_id_role_seq', 3, true);


--
-- TOC entry 2880 (class 0 OID 0)
-- Dependencies: 196
-- Name: grisk_user_id_user_seq; Type: SEQUENCE SET; Schema: public; Owner: grisk
--

SELECT pg_catalog.setval('public.grisk_user_id_user_seq', 11, true);


--
-- TOC entry 2727 (class 2606 OID 24602)
-- Name: grisk_endpoint grisk_endpoint_pk; Type: CONSTRAINT; Schema: public; Owner: grisk
--

ALTER TABLE ONLY public.grisk_endpoint
    ADD CONSTRAINT grisk_endpoint_pk PRIMARY KEY (id_endpoint);


--
-- TOC entry 2723 (class 2606 OID 16494)
-- Name: grisk_organization grisk_enterprise_pk; Type: CONSTRAINT; Schema: public; Owner: grisk
--

ALTER TABLE ONLY public.grisk_organization
    ADD CONSTRAINT grisk_enterprise_pk PRIMARY KEY (id_organization);


--
-- TOC entry 2725 (class 2606 OID 40977)
-- Name: grisk_organization grisk_enterprise_un; Type: CONSTRAINT; Schema: public; Owner: grisk
--

ALTER TABLE ONLY public.grisk_organization
    ADD CONSTRAINT grisk_enterprise_un UNIQUE (rut);


--
-- TOC entry 2719 (class 2606 OID 16462)
-- Name: grisk_module grisk_module_pkey; Type: CONSTRAINT; Schema: public; Owner: grisk
--

ALTER TABLE ONLY public.grisk_module
    ADD CONSTRAINT grisk_module_pkey PRIMARY KEY (id_module);


--
-- TOC entry 2715 (class 2606 OID 16451)
-- Name: grisk_role grisk_role_pkey; Type: CONSTRAINT; Schema: public; Owner: grisk
--

ALTER TABLE ONLY public.grisk_role
    ADD CONSTRAINT grisk_role_pkey PRIMARY KEY (id_role);


--
-- TOC entry 2717 (class 2606 OID 49169)
-- Name: grisk_role grisk_role_un; Type: CONSTRAINT; Schema: public; Owner: grisk
--

ALTER TABLE ONLY public.grisk_role
    ADD CONSTRAINT grisk_role_un UNIQUE (code);


--
-- TOC entry 2710 (class 2606 OID 16440)
-- Name: grisk_user grisk_user_pkey; Type: CONSTRAINT; Schema: public; Owner: grisk
--

ALTER TABLE ONLY public.grisk_user
    ADD CONSTRAINT grisk_user_pkey PRIMARY KEY (id_user);


--
-- TOC entry 2712 (class 2606 OID 49171)
-- Name: grisk_user grisk_user_un; Type: CONSTRAINT; Schema: public; Owner: grisk
--

ALTER TABLE ONLY public.grisk_user
    ADD CONSTRAINT grisk_user_un UNIQUE (username, email);


--
-- TOC entry 2721 (class 2606 OID 16473)
-- Name: role_has_module role_has_module_pk; Type: CONSTRAINT; Schema: public; Owner: grisk
--

ALTER TABLE ONLY public.role_has_module
    ADD CONSTRAINT role_has_module_pk PRIMARY KEY (role, module);


--
-- TOC entry 2713 (class 1259 OID 16468)
-- Name: grisk_user_username_idx; Type: INDEX; Schema: public; Owner: grisk
--

CREATE UNIQUE INDEX grisk_user_username_idx ON public.grisk_user USING btree (username);


--
-- TOC entry 2732 (class 2606 OID 24603)
-- Name: grisk_endpoint grisk_endpoint_grisk_module_fk; Type: FK CONSTRAINT; Schema: public; Owner: grisk
--

ALTER TABLE ONLY public.grisk_endpoint
    ADD CONSTRAINT grisk_endpoint_grisk_module_fk FOREIGN KEY (module) REFERENCES public.grisk_module(id_module);


--
-- TOC entry 2729 (class 2606 OID 16495)
-- Name: grisk_user grisk_user_grisk_enterprise_fk; Type: FK CONSTRAINT; Schema: public; Owner: grisk
--

ALTER TABLE ONLY public.grisk_user
    ADD CONSTRAINT grisk_user_grisk_enterprise_fk FOREIGN KEY (organization) REFERENCES public.grisk_organization(id_organization);


--
-- TOC entry 2728 (class 2606 OID 16463)
-- Name: grisk_user grisk_user_grisk_role_fk; Type: FK CONSTRAINT; Schema: public; Owner: grisk
--

ALTER TABLE ONLY public.grisk_user
    ADD CONSTRAINT grisk_user_grisk_role_fk FOREIGN KEY (role) REFERENCES public.grisk_role(id_role);


--
-- TOC entry 2731 (class 2606 OID 16479)
-- Name: role_has_module role_has_module_grisk_module_fk; Type: FK CONSTRAINT; Schema: public; Owner: grisk
--

ALTER TABLE ONLY public.role_has_module
    ADD CONSTRAINT role_has_module_grisk_module_fk FOREIGN KEY (module) REFERENCES public.grisk_module(id_module);


--
-- TOC entry 2730 (class 2606 OID 16474)
-- Name: role_has_module role_has_module_grisk_role_fk; Type: FK CONSTRAINT; Schema: public; Owner: grisk
--

ALTER TABLE ONLY public.role_has_module
    ADD CONSTRAINT role_has_module_grisk_role_fk FOREIGN KEY (role) REFERENCES public.grisk_role(id_role);


-- Completed on 2019-06-15 03:19:58

--
-- PostgreSQL database dump complete
--

